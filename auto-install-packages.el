(require 'setup-package)

;; install extensions if they're missing
(defun init--install-packages ()
  (packages-install
   (cons 'ace-jump-mode melpa)
   (cons 'ack gnu)
   (cons 'auctex gnu)
   (cons 'auto-complete melpa)
   (cons 'auto-complete-clang melpa)
   (cons 'android-mode marmalade)
   (cons 'browse-kill-ring melpa)
   (cons 'company melpa)
   (cons 'dired-details melpa)
   (cons 'dired-details+ melpa)
   (cons 'dynamic-fonts melpa)
   (cons 'ecb melpa)
   (cons 'emacs-eclim melpa)
   (cons 'erc-hl-nicks melpa)
   (cons 'evil melpa)
   (cons 'flymake melpa)
   (cons 'flymake-cursor melpa)
   (cons 'fuzzy melpa)
   (cons 'ggtags gnu)
   (cons 'git-gutter-fringe melpa)
   (cons 'git-blame melpa)
   (cons 'git-commit-mode melpa)
   (cons 'gitignore-mode melpa)
   (cons 'gitconfig-mode melpa)
   (cons 'helm melpa)
   (cons 'helm-ack melpa)
   (cons 'helm-gtags melpa)
   (cons 'ibuffer-vc melpa)
   (cons 'ido-hacks melpa)
   (cons 'ido-ubiquitous melpa)
   (cons 'magit melpa)
   (cons 'nlinum melpa)
   (cons 'openwith melpa)
   (cons 'pos-tip melpa)
   (cons 'savekill melpa)
   (cons 'scheme-complete melpa)
   (cons 'session melpa)
   (cons 'shell-pop melpa)
   (cons 'smex melpa)
   (cons 'smartparens melpa)
   (cons 'smooth-scrolling melpa)
   (cons 'solarized-theme melpa)
   (cons 'surround melpa)
   (cons 'switch-window melpa)
   (cons 'undo-tree melpa)
   (cons 'w3m melpa)
   (cons 'yasnippet melpa)))

(condition-case nil
    (init--install-packages)
  (error
   (package-refresh-contents)
   (init--install-packages)))

(provide 'auto-install-packages)
